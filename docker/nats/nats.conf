# NATS Server config for local development
# - JetStream enabled (required for MQTT sessions + retained messages)
# - MQTT enabled on port 1883
# - Monitoring enabled on port 8222

# MQTT requires server_name to be set (must be unique in a cluster)
server_name: "lmu_iot_portal_mqtt"

host: 0.0.0.0
port: 4222

# Monitoring / health endpoints
http: 8222

# Enable JetStream (persistence)
jetstream {
  store_dir: /data/jetstream

  # Keep these modest for dev; adjust as needed.
  max_memory_store: 256MB
  max_file_store: 2GB
}

# Enable MQTT support
mqtt {
  port: 1883

  # Optional tuning knobs (defaults are fine for dev)
  # ack_wait: "30s"
  # max_ack_pending: 100
}
